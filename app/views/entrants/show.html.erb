<div class="row">
  <div class="span12">
    <h1 class="page-header"><%= @entrant.name %> (<%= @entrant.points %> points)</h1>
  </div>
</div>
<div class="row">
  <div class="span12">
    <table class="table table-striped">
      <thead>
        <th>Team</th>
        <th>Player</th>
        <th>Goals</th>
        <th>Assists</th>
        <th>Wins</th>
        <th>Shutouts</th>
        <th>Total</th>
      </thead>
      <% @entrant.players.sort_by{|p| p.team.name}.each do |player| %>
        <tr>
          <td><%= link_to player.team.name, player.team %></td>
          <td><%= link_to player.name, player %></td>
          <td><%= player.goals.to_s %></td>
          <td><%= player.assists.to_s %></td>
          <% if player.goalie? %>
            <td><%= player.wins.to_s %></td>
            <td><%= player.shutouts.to_s %></td>
          <% else %>
            <td>&dash;</td>
            <td>&dash;</td>
          <% end %>
          <td><%= player.points.to_s %></td>
        </tr>
      <% end %>
    </table>     
    <hr />
    <!--<h3 style="margin-bottom:10px;">Ranking Chart</h3>
    <div id="rankings_chart" style="width: 100%; height: 350px;"></div>-->
    <%= link_to_function "Back", "history.back()", :class => 'btn' %>
  </div>
</div>

<script type="text/javascript">

  $(document).ready(function() {
    new Highcharts.Chart({
      chart: { renderTo: 'rankings_chart' },
      title: { text: null },
      xAxis: { 
        type: 'datetime'
      },
      yAxis: {
        title: { text: 'Rank'}
      },
      tooltip: {
        formatter: function () {
          return Highcharts.dateFormat("%B %e %Y", this.x) + ': ' + this.y;
        }
      },    
      series: [{
        showInLegend: false,
        pointInterval: <%= 1.day * 1000 %>,
        pointStart: <%= 3.weeks.ago.at_midnight.to_i * 1000 %>,
        data: <%= @entrant.rankings.collect{|e| e["rank"]}.inspect %>
      }]
    });  
  });

</script>